{
  "url": "https://api.github.com/repos/erusev/parsedown/issues/162",
  "labels_url": "https://api.github.com/repos/erusev/parsedown/issues/162/labels{/name}",
  "comments_url": "https://api.github.com/repos/erusev/parsedown/issues/162/comments",
  "events_url": "https://api.github.com/repos/erusev/parsedown/issues/162/events",
  "html_url": "https://github.com/erusev/parsedown/issues/162",
  "id": 32488782,
  "number": 162,
  "title": "[Proposal] Allow easy extensibility of code block syntax highlighting",
  "user": {
    "login": "SammyK",
    "id": 578780,
    "avatar_url": "https://avatars.githubusercontent.com/u/578780?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/SammyK",
    "html_url": "https://github.com/SammyK",
    "followers_url": "https://api.github.com/users/SammyK/followers",
    "following_url": "https://api.github.com/users/SammyK/following{/other_user}",
    "gists_url": "https://api.github.com/users/SammyK/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/SammyK/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/SammyK/subscriptions",
    "organizations_url": "https://api.github.com/users/SammyK/orgs",
    "repos_url": "https://api.github.com/users/SammyK/repos",
    "events_url": "https://api.github.com/users/SammyK/events{/privacy}",
    "received_events_url": "https://api.github.com/users/SammyK/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "url": "https://api.github.com/repos/erusev/parsedown/labels/suggestion",
      "name": "suggestion",
      "color": "bfd4f2"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "milestone": null,
  "comments": 8,
  "created_at": "2014-04-29T21:52:57Z",
  "updated_at": "2014-05-01T20:58:34Z",
  "closed_at": "2014-04-30T22:05:53Z",
  "body": "I've got a nice [syntax highlighter](http://fshl.kukulich.cz/) that can highlight many different languages. It'd be nice if the `Parsedown` class would do a check for a highlighter method instead of just doing a `htmlspecialchars()` on the code. For example my extended class could have:\r\n\r\n```php\r\nclass MyMarkdownClass extends \\Parsedown\r\n{\r\n    public function highlightPhpCode($code)\r\n    {\r\n        return $this->php_highlighter->highlight($code);\r\n    }\r\n\r\n    public function highlightHtmlCode($code)\r\n    {\r\n        return $this->html_highlighter->highlight($code);\r\n    }\r\n}\r\n```\r\n\r\nI can add this functionality in a PR if you think it would be useful.",
  "closed_by": {
    "login": "erusev",
    "id": 184170,
    "avatar_url": "https://avatars.githubusercontent.com/u/184170?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/erusev",
    "html_url": "https://github.com/erusev",
    "followers_url": "https://api.github.com/users/erusev/followers",
    "following_url": "https://api.github.com/users/erusev/following{/other_user}",
    "gists_url": "https://api.github.com/users/erusev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/erusev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/erusev/subscriptions",
    "organizations_url": "https://api.github.com/users/erusev/orgs",
    "repos_url": "https://api.github.com/users/erusev/repos",
    "events_url": "https://api.github.com/users/erusev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/erusev/received_events",
    "type": "User",
    "site_admin": false
  }
}
BODY STARTS FROM HERE
[
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/41737589",
    "html_url": "https://github.com/erusev/parsedown/issues/162#issuecomment-41737589",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/162",
    "id": 41737589,
    "user": {
      "login": "erusev",
      "id": 184170,
      "avatar_url": "https://avatars.githubusercontent.com/u/184170?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erusev",
      "html_url": "https://github.com/erusev",
      "followers_url": "https://api.github.com/users/erusev/followers",
      "following_url": "https://api.github.com/users/erusev/following{/other_user}",
      "gists_url": "https://api.github.com/users/erusev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erusev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erusev/subscriptions",
      "organizations_url": "https://api.github.com/users/erusev/orgs",
      "repos_url": "https://api.github.com/users/erusev/repos",
      "events_url": "https://api.github.com/users/erusev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erusev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-29T21:58:27Z",
    "updated_at": "2014-04-29T21:59:02Z",
    "body": "Parsedown already is extensible enough for this. See https://github.com/erusev/parsedown/pull/111#issuecomment-41334808."
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/41738276",
    "html_url": "https://github.com/erusev/parsedown/issues/162#issuecomment-41738276",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/162",
    "id": 41738276,
    "user": {
      "login": "SammyK",
      "id": 578780,
      "avatar_url": "https://avatars.githubusercontent.com/u/578780?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SammyK",
      "html_url": "https://github.com/SammyK",
      "followers_url": "https://api.github.com/users/SammyK/followers",
      "following_url": "https://api.github.com/users/SammyK/following{/other_user}",
      "gists_url": "https://api.github.com/users/SammyK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SammyK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SammyK/subscriptions",
      "organizations_url": "https://api.github.com/users/SammyK/orgs",
      "repos_url": "https://api.github.com/users/SammyK/repos",
      "events_url": "https://api.github.com/users/SammyK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SammyK/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-29T22:06:15Z",
    "updated_at": "2014-04-29T22:06:15Z",
    "body": "Yes, but the issue is that by the time `$Block['element']['text']['text']` gets to `completeFencedCode()` it has already been `htmlspecialchars()` encoded. I need the original non-encoded version. :)"
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/41738617",
    "html_url": "https://github.com/erusev/parsedown/issues/162#issuecomment-41738617",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/162",
    "id": 41738617,
    "user": {
      "login": "erusev",
      "id": 184170,
      "avatar_url": "https://avatars.githubusercontent.com/u/184170?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erusev",
      "html_url": "https://github.com/erusev",
      "followers_url": "https://api.github.com/users/erusev/followers",
      "following_url": "https://api.github.com/users/erusev/following{/other_user}",
      "gists_url": "https://api.github.com/users/erusev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erusev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erusev/subscriptions",
      "organizations_url": "https://api.github.com/users/erusev/orgs",
      "repos_url": "https://api.github.com/users/erusev/repos",
      "events_url": "https://api.github.com/users/erusev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erusev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-29T22:09:58Z",
    "updated_at": "2014-04-29T22:10:19Z",
    "body": "Could you elaborate, please? Why is the fact that it's been encoded a problem?"
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/41822044",
    "html_url": "https://github.com/erusev/parsedown/issues/162#issuecomment-41822044",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/162",
    "id": 41822044,
    "user": {
      "login": "SammyK",
      "id": 578780,
      "avatar_url": "https://avatars.githubusercontent.com/u/578780?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SammyK",
      "html_url": "https://github.com/SammyK",
      "followers_url": "https://api.github.com/users/SammyK/followers",
      "following_url": "https://api.github.com/users/SammyK/following{/other_user}",
      "gists_url": "https://api.github.com/users/SammyK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SammyK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SammyK/subscriptions",
      "organizations_url": "https://api.github.com/users/SammyK/orgs",
      "repos_url": "https://api.github.com/users/SammyK/repos",
      "events_url": "https://api.github.com/users/SammyK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SammyK/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-30T17:05:06Z",
    "updated_at": "2014-04-30T17:06:27Z",
    "body": "Sure. Say I have a sub class that handles my [syntax highlighter](http://fshl.kukulich.cz/) like so:\r\n\r\n```php\r\nclass Markdown extends \\Parsedown\r\n{\r\n    protected $highlighter;\r\n\r\n    public function __construct()\r\n    {\r\n        $this->highlighter = new \\FSHL\\Highlighter(new \\FSHL\\Output\\Html());\r\n        $this->highlighter->setLexer(new \\FSHL\\Lexer\\Php());\r\n    }\r\n\r\n    public function completeFencedCode($block)\r\n    {\r\n        $block['element']['text']['text'] = $this->highlighter->highlight($block['element']['text']['text']);\r\n\r\n        return $block;\r\n    }\r\n}\r\n```\r\n\r\nIt's important to note that `$this->highlighter->highlight()` expects pure, unescaped php code.\r\n\r\nAnd say I have the following markdown:\r\n\r\n```markdown\r\n$foo = $bar->baz();\r\n```\r\n\r\nBy the time the above markdown reaches `completeFencedCode()`, the code block will be:\r\n\r\n    $foo = $bar-&gt;baz();\r\n\r\nSo when I try to send that to my highlighter, it escapes it again and I get this:\r\n\r\n    <span class=\"php-var\">$foo</span> = <span class=\"php-var\">$bar</span>-&amp;gt;baz();\r\n\r\nI hope that makes sense! :)"
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/41850246",
    "html_url": "https://github.com/erusev/parsedown/issues/162#issuecomment-41850246",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/162",
    "id": 41850246,
    "user": {
      "login": "erusev",
      "id": 184170,
      "avatar_url": "https://avatars.githubusercontent.com/u/184170?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erusev",
      "html_url": "https://github.com/erusev",
      "followers_url": "https://api.github.com/users/erusev/followers",
      "following_url": "https://api.github.com/users/erusev/following{/other_user}",
      "gists_url": "https://api.github.com/users/erusev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erusev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erusev/subscriptions",
      "organizations_url": "https://api.github.com/users/erusev/orgs",
      "repos_url": "https://api.github.com/users/erusev/repos",
      "events_url": "https://api.github.com/users/erusev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erusev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-30T21:03:06Z",
    "updated_at": "2014-04-30T21:03:06Z",
    "body": "Thanks. I'll see what I can do."
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/41857520",
    "html_url": "https://github.com/erusev/parsedown/issues/162#issuecomment-41857520",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/162",
    "id": 41857520,
    "user": {
      "login": "erusev",
      "id": 184170,
      "avatar_url": "https://avatars.githubusercontent.com/u/184170?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erusev",
      "html_url": "https://github.com/erusev",
      "followers_url": "https://api.github.com/users/erusev/followers",
      "following_url": "https://api.github.com/users/erusev/following{/other_user}",
      "gists_url": "https://api.github.com/users/erusev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erusev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erusev/subscriptions",
      "organizations_url": "https://api.github.com/users/erusev/orgs",
      "repos_url": "https://api.github.com/users/erusev/repos",
      "events_url": "https://api.github.com/users/erusev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erusev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-30T22:09:05Z",
    "updated_at": "2014-04-30T22:09:13Z",
    "body": "I hope that this resolves it."
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/41857610",
    "html_url": "https://github.com/erusev/parsedown/issues/162#issuecomment-41857610",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/162",
    "id": 41857610,
    "user": {
      "login": "SammyK",
      "id": 578780,
      "avatar_url": "https://avatars.githubusercontent.com/u/578780?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SammyK",
      "html_url": "https://github.com/SammyK",
      "followers_url": "https://api.github.com/users/SammyK/followers",
      "following_url": "https://api.github.com/users/SammyK/following{/other_user}",
      "gists_url": "https://api.github.com/users/SammyK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SammyK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SammyK/subscriptions",
      "organizations_url": "https://api.github.com/users/SammyK/orgs",
      "repos_url": "https://api.github.com/users/SammyK/repos",
      "events_url": "https://api.github.com/users/SammyK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SammyK/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-04-30T22:09:52Z",
    "updated_at": "2014-04-30T22:09:52Z",
    "body": "Cool - thanks man! I'll check it out. :)"
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/41956137",
    "html_url": "https://github.com/erusev/parsedown/issues/162#issuecomment-41956137",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/162",
    "id": 41956137,
    "user": {
      "login": "SammyK",
      "id": 578780,
      "avatar_url": "https://avatars.githubusercontent.com/u/578780?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SammyK",
      "html_url": "https://github.com/SammyK",
      "followers_url": "https://api.github.com/users/SammyK/followers",
      "following_url": "https://api.github.com/users/SammyK/following{/other_user}",
      "gists_url": "https://api.github.com/users/SammyK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SammyK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SammyK/subscriptions",
      "organizations_url": "https://api.github.com/users/SammyK/orgs",
      "repos_url": "https://api.github.com/users/SammyK/repos",
      "events_url": "https://api.github.com/users/SammyK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SammyK/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-05-01T20:58:34Z",
    "updated_at": "2014-05-01T20:58:34Z",
    "body": ":+1: Works great! Thanks!"
  }
]
