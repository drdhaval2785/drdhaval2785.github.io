{
  "url": "https://api.github.com/repos/erusev/parsedown/issues/210",
  "labels_url": "https://api.github.com/repos/erusev/parsedown/issues/210/labels{/name}",
  "comments_url": "https://api.github.com/repos/erusev/parsedown/issues/210/comments",
  "events_url": "https://api.github.com/repos/erusev/parsedown/issues/210/events",
  "html_url": "https://github.com/erusev/parsedown/issues/210",
  "id": 41373085,
  "number": 210,
  "title": "XSS Image Tag",
  "user": {
    "login": "xLink",
    "id": 217433,
    "avatar_url": "https://avatars.githubusercontent.com/u/217433?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/xLink",
    "html_url": "https://github.com/xLink",
    "followers_url": "https://api.github.com/users/xLink/followers",
    "following_url": "https://api.github.com/users/xLink/following{/other_user}",
    "gists_url": "https://api.github.com/users/xLink/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/xLink/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/xLink/subscriptions",
    "organizations_url": "https://api.github.com/users/xLink/orgs",
    "repos_url": "https://api.github.com/users/xLink/repos",
    "events_url": "https://api.github.com/users/xLink/events{/privacy}",
    "received_events_url": "https://api.github.com/users/xLink/received_events",
    "type": "User",
    "site_admin": false
  },
  "labels": [
    {
      "url": "https://api.github.com/repos/erusev/parsedown/labels/suggestion",
      "name": "suggestion",
      "color": "bfd4f2"
    }
  ],
  "state": "closed",
  "locked": false,
  "assignee": null,
  "milestone": null,
  "comments": 7,
  "created_at": "2014-08-28T09:50:19Z",
  "updated_at": "2015-01-15T11:48:06Z",
  "closed_at": "2015-01-15T11:48:06Z",
  "body": "Hey im using your parser in a laravel install, just had someone post \r\n```md\r\n![\" onerror=\"alert(1)](0 \"\"alert(2);\")\r\n``` \r\n\r\nand it return\r\n \r\n```html\r\n<img alt=\"\" onerror=\"alert(1)\" src=\"0\" title=\"\"alert(2);\" />\r\n```\r\nwith this the alert(1) was fired, is there anyway to have this fixed? I am already doing an escape within my code before the markdown gets parsed, but ofc it wouldnt pick this up :/\r\n",
  "closed_by": {
    "login": "erusev",
    "id": 184170,
    "avatar_url": "https://avatars.githubusercontent.com/u/184170?v=3",
    "gravatar_id": "",
    "url": "https://api.github.com/users/erusev",
    "html_url": "https://github.com/erusev",
    "followers_url": "https://api.github.com/users/erusev/followers",
    "following_url": "https://api.github.com/users/erusev/following{/other_user}",
    "gists_url": "https://api.github.com/users/erusev/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/erusev/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/erusev/subscriptions",
    "organizations_url": "https://api.github.com/users/erusev/orgs",
    "repos_url": "https://api.github.com/users/erusev/repos",
    "events_url": "https://api.github.com/users/erusev/events{/privacy}",
    "received_events_url": "https://api.github.com/users/erusev/received_events",
    "type": "User",
    "site_admin": false
  }
}
BODY STARTS FROM HERE
[
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/53698288",
    "html_url": "https://github.com/erusev/parsedown/issues/210#issuecomment-53698288",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/210",
    "id": 53698288,
    "user": {
      "login": "GrahamCampbell",
      "id": 2829600,
      "avatar_url": "https://avatars.githubusercontent.com/u/2829600?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/GrahamCampbell",
      "html_url": "https://github.com/GrahamCampbell",
      "followers_url": "https://api.github.com/users/GrahamCampbell/followers",
      "following_url": "https://api.github.com/users/GrahamCampbell/following{/other_user}",
      "gists_url": "https://api.github.com/users/GrahamCampbell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/GrahamCampbell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/GrahamCampbell/subscriptions",
      "organizations_url": "https://api.github.com/users/GrahamCampbell/orgs",
      "repos_url": "https://api.github.com/users/GrahamCampbell/repos",
      "events_url": "https://api.github.com/users/GrahamCampbell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/GrahamCampbell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-28T09:55:08Z",
    "updated_at": "2014-08-28T09:55:08Z",
    "body": "That is behond the scope of parsedown. Use something like htmlpurifier, or my laravel security package to protect against this."
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/53706315",
    "html_url": "https://github.com/erusev/parsedown/issues/210#issuecomment-53706315",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/210",
    "id": 53706315,
    "user": {
      "login": "xPaw",
      "id": 613331,
      "avatar_url": "https://avatars.githubusercontent.com/u/613331?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xPaw",
      "html_url": "https://github.com/xPaw",
      "followers_url": "https://api.github.com/users/xPaw/followers",
      "following_url": "https://api.github.com/users/xPaw/following{/other_user}",
      "gists_url": "https://api.github.com/users/xPaw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xPaw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xPaw/subscriptions",
      "organizations_url": "https://api.github.com/users/xPaw/orgs",
      "repos_url": "https://api.github.com/users/xPaw/repos",
      "events_url": "https://api.github.com/users/xPaw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xPaw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-28T11:13:31Z",
    "updated_at": "2014-08-28T11:13:31Z",
    "body": "See #161"
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/53866922",
    "html_url": "https://github.com/erusev/parsedown/issues/210#issuecomment-53866922",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/210",
    "id": 53866922,
    "user": {
      "login": "apfelbox",
      "id": 1032411,
      "avatar_url": "https://avatars.githubusercontent.com/u/1032411?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apfelbox",
      "html_url": "https://github.com/apfelbox",
      "followers_url": "https://api.github.com/users/apfelbox/followers",
      "following_url": "https://api.github.com/users/apfelbox/following{/other_user}",
      "gists_url": "https://api.github.com/users/apfelbox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apfelbox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apfelbox/subscriptions",
      "organizations_url": "https://api.github.com/users/apfelbox/orgs",
      "repos_url": "https://api.github.com/users/apfelbox/repos",
      "events_url": "https://api.github.com/users/apfelbox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apfelbox/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-29T12:02:31Z",
    "updated_at": "2014-08-29T12:02:31Z",
    "body": "I would argue that this is a bug instead of just waving it off with \"parsedown does not sanitize html\".\r\n\r\nEven the official spec says something in this direction:\r\n> Ampersands in particular are bedeviling for web writers. If you want to write about ‘AT&T’, you need to write ‘AT&amp;T’. You even need to escape ampersands within URLs.\r\n> [...]\r\n> Markdown allows you to use these characters naturally, taking care of all the necessary escaping for you. If you use an ampersand as part of an HTML entity, it remains unchanged; otherwise it will be translated into `&amp;`.\r\n\r\n[Source](http://daringfireball.net/projects/markdown/syntax#autoescape)\r\n\r\nSo I would argue that since the part in the square brackets of an image link is meant for `alt` tags, you should be able to write your text \"naturally\" (quote) and therefore it should be [properly escaped](https://github.com/fabpot/Twig/blob/master/lib/Twig/Extension/Core.php#L1021-1036)."
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/53912284",
    "html_url": "https://github.com/erusev/parsedown/issues/210#issuecomment-53912284",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/210",
    "id": 53912284,
    "user": {
      "login": "hkdobrev",
      "id": 506129,
      "avatar_url": "https://avatars.githubusercontent.com/u/506129?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hkdobrev",
      "html_url": "https://github.com/hkdobrev",
      "followers_url": "https://api.github.com/users/hkdobrev/followers",
      "following_url": "https://api.github.com/users/hkdobrev/following{/other_user}",
      "gists_url": "https://api.github.com/users/hkdobrev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hkdobrev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hkdobrev/subscriptions",
      "organizations_url": "https://api.github.com/users/hkdobrev/orgs",
      "repos_url": "https://api.github.com/users/hkdobrev/repos",
      "events_url": "https://api.github.com/users/hkdobrev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hkdobrev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-29T18:20:55Z",
    "updated_at": "2014-08-29T18:20:55Z",
    "body": "@apfelbox I think you are talking about encoding HTML entities. This is totally different than preventing XSS. Please correct me if I'm wrong."
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/53951574",
    "html_url": "https://github.com/erusev/parsedown/issues/210#issuecomment-53951574",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/210",
    "id": 53951574,
    "user": {
      "login": "apfelbox",
      "id": 1032411,
      "avatar_url": "https://avatars.githubusercontent.com/u/1032411?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apfelbox",
      "html_url": "https://github.com/apfelbox",
      "followers_url": "https://api.github.com/users/apfelbox/followers",
      "following_url": "https://api.github.com/users/apfelbox/following{/other_user}",
      "gists_url": "https://api.github.com/users/apfelbox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/apfelbox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/apfelbox/subscriptions",
      "organizations_url": "https://api.github.com/users/apfelbox/orgs",
      "repos_url": "https://api.github.com/users/apfelbox/repos",
      "events_url": "https://api.github.com/users/apfelbox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/apfelbox/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-30T07:38:59Z",
    "updated_at": "2014-08-30T07:38:59Z",
    "body": "@hkdobrev generally it is, in this case it isn't. To prevent this issue you need to correctly encode HTML attribute values - which in this case conveniently also fixes the XSS issues.\r\n\r\nJust wanted to say that in this case you can hit two birds with one stone. (There will be still some XSS issues left, but not in the `alt` tag of images anymore.)"
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/57126183",
    "html_url": "https://github.com/erusev/parsedown/issues/210#issuecomment-57126183",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/210",
    "id": 57126183,
    "user": {
      "login": "xPaw",
      "id": 613331,
      "avatar_url": "https://avatars.githubusercontent.com/u/613331?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/xPaw",
      "html_url": "https://github.com/xPaw",
      "followers_url": "https://api.github.com/users/xPaw/followers",
      "following_url": "https://api.github.com/users/xPaw/following{/other_user}",
      "gists_url": "https://api.github.com/users/xPaw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/xPaw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/xPaw/subscriptions",
      "organizations_url": "https://api.github.com/users/xPaw/orgs",
      "repos_url": "https://api.github.com/users/xPaw/repos",
      "events_url": "https://api.github.com/users/xPaw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/xPaw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-09-29T07:37:39Z",
    "updated_at": "2014-09-29T07:37:39Z",
    "body": "What about simply using htmlentities on $value here? https://github.com/erusev/parsedown/blob/master/Parsedown.php#L898"
  },
  {
    "url": "https://api.github.com/repos/erusev/parsedown/issues/comments/70074802",
    "html_url": "https://github.com/erusev/parsedown/issues/210#issuecomment-70074802",
    "issue_url": "https://api.github.com/repos/erusev/parsedown/issues/210",
    "id": 70074802,
    "user": {
      "login": "erusev",
      "id": 184170,
      "avatar_url": "https://avatars.githubusercontent.com/u/184170?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/erusev",
      "html_url": "https://github.com/erusev",
      "followers_url": "https://api.github.com/users/erusev/followers",
      "following_url": "https://api.github.com/users/erusev/following{/other_user}",
      "gists_url": "https://api.github.com/users/erusev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/erusev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/erusev/subscriptions",
      "organizations_url": "https://api.github.com/users/erusev/orgs",
      "repos_url": "https://api.github.com/users/erusev/repos",
      "events_url": "https://api.github.com/users/erusev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/erusev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-15T11:48:06Z",
    "updated_at": "2015-01-15T11:48:06Z",
    "body": "I'm closing this as a duplicate of #161."
  }
]
