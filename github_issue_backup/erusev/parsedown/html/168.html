<!DOCTYPE html>
<html class='' lang='en'>
<head prefix='og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#'>
<meta http-equiv='content-type' content='text/html; charset=UTF-8'>
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge'>
<meta http-equiv='Content-Language' content='en'>
<title>erusev/parsedown/168</title>
<link href='github-c486157afcc5f58155a921bc675afb08733fbaa8dcf39ac2104d3.css' media='all' rel='stylesheet'>
<link href='github2-da2e842cc3f0aaf33b727d0ef034243c12ab008fd09b24868b97.css' media='all' rel='stylesheet'>
<meta http-equiv='x-pjax-version' content='4426702614c8182f33d1780ad1169662'>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shCore.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shAutoloader.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushAppleScript.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushAS3.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushBash.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushColdFusion.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushCpp.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushCSharp.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushCss.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushDelphi.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushDiff.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushErlang.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushGroovy.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushJava.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushJavaFX.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/syntaxhighlighter/scripts/shBrushJScript.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushPerl.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushPhp.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushPlain.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushPowerShell.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushPython.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushRuby.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushSass.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushScala.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushSql.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushVb.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shBrushXml.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shCore.js'></script>
	<script type='text/javascript' src='syntaxhighlighter/scripts/shLegacy.js'></script>
	<link type='text/css' rel='stylesheet' href='syntaxhighlighter/styles/shCoreDefault.css'/>
	<script type='text/javascript'>SyntaxHighlighter.all();</script>
</head>
<body class='logged_in  env-production windows vis-public'>
<h1 align='center'><a href='https://github.com/erusev/parsedown/issues/168' target='_blank'>XSS (<script>, <style>)</h1><hr/><div id="#issue-32745112" class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment current-user" data-body-version="3d69eb2502aec4738da37c0867d635da">
  <div class="timeline-comment-header ">
  <div class="timeline-comment-header-text">
    <strong>
      <a href="https://github.com/moldcraft" class="author">moldcraft</a>
    </strong>
    commented on 
    <a href="#issue-32745112" class="timestamp">
      <time>2014-05-03 11:18:58</time>
    </a>
  </div>
</div><div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>html tags are not striped <em>(or better will be to <code>htmlspecialchars()</code> them)</em></p>
<hr />
<p>Test string:</p>
<pre class="brush: html">&lt;script type="text/javascript"&gt;alert('XSS');&lt;/script&gt;
&lt;style type="text/css"&gt;body { background: red; }&lt;/style&gt;</code></pre>
<p>Result: <a href="http://sourcebox.io/27978c3083f1bf93be8f9325d3a2a36b/markdown">http://sourcebox.io/27978c3083f1bf93be8f9325d3a2a36b/markdown</a></p>
<ul>
<li><a href="https://github.com/MmdBundles/SourceBoxBundle/blob/afd9526fa4cb41a7feaadfd9f50ae9b242391d6d/Controller/PreviewController.php#L17">PHP Code</a></li>
<li><a href="https://github.com/MmdBundles/SourceBoxBundle/blob/afd9526fa4cb41a7feaadfd9f50ae9b242391d6d/Resources/public/js/scripts.js#L832">JavaScript Code</a></li>
</ul>
<hr />
<p><strong>Is there any option to enable safe html output? Or am I doing something wrong?</strong></p>
<hr />
<p><strong>Github</strong> generates this html:</p>
<pre class="brush: html">&lt;p&gt;body { background: red; }&lt;/p&gt;</code></pre>
<p>You can test that by executing this script in your browser console:</p>
<pre class="brush: javascript">jQuery.post('/preview?text='+ encodeURIComponent('&lt;script type="text/javascript"&gt;alert("XSS");&lt;/script&gt;&lt;style type="text/css"&gt;body { background: red; }&lt;/style&gt;'), function(html){ alert(html); });</code></pre>
<hr />
<p><strong>Bitbucket.org</strong> generates this html:</p>
<pre class="brush: html">&lt;p&gt;&amp;lt;script type="text/javascript"&amp;gt;alert('XSS');&amp;lt;/script&amp;gt;
&amp;lt;style type="text/css"&amp;gt;body { background: red; }&amp;lt;/style&amp;gt;&lt;/p&gt;</code></pre>
  </div>
  </div>
  </div>
  <br/>
<div id="#issuecomment-42102967" class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment current-user" data-body-version="3d69eb2502aec4738da37c0867d635da">
  <div class="timeline-comment-header ">
  <div class="timeline-comment-header-text">
    <strong>
      <a href="https://github.com/hkdobrev" class="author">hkdobrev</a>
    </strong>
    commented on 
    <a href="#issuecomment-42102967" class="timestamp">
      <time>2014-05-03 11:45:02</time>
    </a>
  </div>
</div><div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p>A Markdown parser should accept HTML including scripts.</p>
<p>It is your responsibility to decide whether and how you would sanitize your input.</p>
  </div>
  </div>
  </div>
  <br/>
<div id="#issuecomment-42103314" class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment current-user" data-body-version="3d69eb2502aec4738da37c0867d635da">
  <div class="timeline-comment-header ">
  <div class="timeline-comment-header-text">
    <strong>
      <a href="https://github.com/moldcraft" class="author">moldcraft</a>
    </strong>
    commented on 
    <a href="#issuecomment-42103314" class="timestamp">
      <time>2014-05-03 12:03:32</time>
    </a>
  </div>
</div><div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><strong><a href="https://github.com/hkdobrev" target="_blank">@hkdobrev</a></strong> ok thanks</p>
  </div>
  </div>
  </div>
  <br/>
<div id="#issuecomment-42203573" class="comment previewable-edit timeline-comment js-comment js-task-list-container owner-comment current-user" data-body-version="3d69eb2502aec4738da37c0867d635da">
  <div class="timeline-comment-header ">
  <div class="timeline-comment-header-text">
    <strong>
      <a href="https://github.com/clphillips" class="author">clphillips</a>
    </strong>
    commented on 
    <a href="#issuecomment-42203573" class="timestamp">
      <time>2014-05-05 15:58:16</time>
    </a>
  </div>
</div><div class="edit-comment-hide">
      <div class="comment-body markdown-body markdown-format js-comment-body">
          <p><strong><a href="https://github.com/moldcraft" target="_blank">@moldcraft</a></strong> see #161.</p>
  </div>
  </div>
  </div>
  <br/>
</body></html>